<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>developing/input · TerasologyDocs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="User Input"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="developing/input · TerasologyDocs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://kaubster.github.io/TerasologyDocs/"/><meta property="og:description" content="User Input"/><meta property="og:image" content="https://kaubster.github.io/TerasologyDocs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://kaubster.github.io/TerasologyDocs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/TerasologyDocs/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://kaubster.github.io/TerasologyDocs/blog/atom.xml" title="TerasologyDocs Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://kaubster.github.io/TerasologyDocs/blog/feed.xml" title="TerasologyDocs Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/TerasologyDocs/js/scrollSpy.js"></script><link rel="stylesheet" href="/TerasologyDocs/css/main.css"/><script src="/TerasologyDocs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/TerasologyDocs/"><img class="logo" src="/TerasologyDocs/img/favicon.ico" alt="TerasologyDocs"/><h2 class="headerTitleWithLogo">TerasologyDocs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/TerasologyDocs/docs/doc1" target="_self">Docs</a></li><li class=""><a href="/TerasologyDocs/docs/doc4" target="_self">API</a></li><li class=""><a href="/TerasologyDocs/help" target="_self">Help</a></li><li class=""><a href="/TerasologyDocs/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">developing/input</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="user-input"></a><a href="#user-input" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User Input</h1>
<p>Terasology handles the input over events, which will be send by the
engine when an input condition is met. User input can be used for any
kind of action, like movement, opening chests or rotating the player.
Most of the input system is available through annotations which require
little programming effort.</p>
<p>A quick example is the event for forward movement:</p>
<pre><code class="hljs css language-{.java}"><span class="hljs-meta">@RegisterBindButton</span>(id = <span class="hljs-string">"forwards"</span>, description = <span class="hljs-string">"${engine:menu#binding-forwards}"</span>)
<span class="hljs-meta">@DefaultBinding</span>(<span class="hljs-class"><span class="hljs-keyword">type</span> </span>= <span class="hljs-type">InputType</span>.<span class="hljs-type">KEY</span>, id = <span class="hljs-type">Keyboard</span>.<span class="hljs-type">KeyId</span>.<span class="hljs-type">W</span>)
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ForwardsButton</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BindButtonEvent</span> </span>{
}
</code></pre>
<p>The
:java<code>@RegisterBindButton &lt;org.terasology.input.RegisterBindButton&gt;</code>{.interpreted-text
role=&quot;ref&quot;} annotation marks this class as a button event for a key
binding. A default binding can be defined via the
:java<code>@DefaultBinding &lt;org.terasology.input.DefaultBinding&gt;</code>{.interpreted-text
role=&quot;ref&quot;} annotation. In this case, this would be the <code>W</code> key. And as
the class is used for a button binding, it has to extend
:java<code>BindButtonEvent &lt;org.terasology.input.BindButtonEvent&gt;</code>{.interpreted-text
role=&quot;ref&quot;}.</p>
<h2><a class="anchor" aria-hidden="true" id="define-bindings"></a><a href="#define-bindings" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Define Bindings</h2>
<p>To define an own binding, one needs to create a subclass of:</p>
<ul>
<li>:java<code>BindButtonEvent &lt;org.terasology.input.BindButtonEvent&gt;</code>{.interpreted-text
role=&quot;ref&quot;}, annotated with
:java<code>@RegisterBindButton &lt;org.terasology.input.RegisterBindButton&gt;</code>{.interpreted-text
role=&quot;ref&quot;} for keyboard input.</li>
<li>:java<code>BindAxisEvent &lt;org.terasology.input.BindAxisEvent&gt;</code>{.interpreted-text
role=&quot;ref&quot;}, annotated with
:java<code>@RegisterBindAxis &lt;org.terasology.input.RegisterBindAxis&gt;</code>{.interpreted-text
role=&quot;ref&quot;} or
:java<code>@RegisterRealBindAxis &lt;org.terasology.input.RegisterRealBindAxis&gt;</code>{.interpreted-text
role=&quot;ref&quot;} for controller input.</li>
</ul>
<p>:java<code>@DefaultBinding &lt;org.terasology.input.DefaultBinding&gt;</code>{.interpreted-text
role=&quot;ref&quot;} can and should be used in both cases, it is also possible to
define multiple defaults for the same binding by using the annotation
multiple time.</p>
<p>A full example for a key binding that logs a greeting message when the
user presses <code>G</code> could look like this:</p>
<pre><code class="hljs css language-{.java}"><span class="hljs-selector-tag">package</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.terasology</span><span class="hljs-selector-class">.examplemodule</span><span class="hljs-selector-class">.binds</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.terasology</span><span class="hljs-selector-class">.input</span><span class="hljs-selector-class">.ActivateMode</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.terasology</span><span class="hljs-selector-class">.input</span><span class="hljs-selector-class">.BindButtonEvent</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.terasology</span><span class="hljs-selector-class">.input</span><span class="hljs-selector-class">.DefaultBinding</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.terasology</span><span class="hljs-selector-class">.input</span><span class="hljs-selector-class">.InputType</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.terasology</span><span class="hljs-selector-class">.input</span><span class="hljs-selector-class">.Keyboard</span><span class="hljs-selector-class">.KeyId</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.terasology</span><span class="hljs-selector-class">.input</span><span class="hljs-selector-class">.RegisterBindButton</span>;

<span class="hljs-keyword">@RegisterBindButton</span>(id = <span class="hljs-string">"greet"</span>, category = <span class="hljs-string">"greeting"</span>, description = <span class="hljs-string">"${ExampleModule:input#binding-greet}"</span>, mode = ActivateMode.PRESS)
@DefaultBinding(type = InputType.KEY, id = KeyId.G)
public class GreeterButton extends BindButtonEvent {

}
</code></pre>
<p>This binding is defined in the module <code>ExampleModule</code>. The button is
registered with the id <code>greet</code> and in the <code>greeting</code> category. Both of
these values are required for the input category, as shown in the next
snippet.</p>
<p>The description is a <code>Translation &lt;translation&gt;</code>{.interpreted-text
role=&quot;ref&quot;} identifier and the mode restricts the event to a button
<code>PRESS</code> instead of triggering for press and release. The default binding
maps to the key <code>G</code> and as the class is a button binding, it extends
:java<code>BindButtonEvent &lt;org.terasology.input.BindButtonEvent&gt;</code>{.interpreted-text
role=&quot;ref&quot;}.</p>
<h2><a class="anchor" aria-hidden="true" id="input-categories"></a><a href="#input-categories" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Input Categories</h2>
<p>The binding from the previous example would work on its own but is not
shown in the input settings. To register binds to the input
configuration, input categories are used.</p>
<p>They can be registered via the
:java<code>@InputCategory &lt;org.terasology.input.InputCategory&gt;</code>{.interpreted-text
role=&quot;ref&quot;} annotation, which is used to annotate a package, therefore
in the <code>package-info.java</code> file. The event is contained in the package
<code>org.terasology.examplemodule.binds</code>, therefore a <code>package-info.java</code> is
required in the same package.</p>
<pre><code class="hljs css language-{.java}"><span class="hljs-keyword">@InputCategory</span>(id = <span class="hljs-string">"exampleBindings"</span>, 
               displayName = <span class="hljs-string">"${ExampleModule#category-exampleBindings}"</span>, 
               ordering = {
               "<span class="hljs-selector-tag">ExampleModule</span><span class="hljs-selector-pseudo">:greet"</span>
}) <span class="hljs-selector-tag">package</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.terasology</span><span class="hljs-selector-class">.examplemodule</span><span class="hljs-selector-class">.binds</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.terasology</span><span class="hljs-selector-class">.input</span><span class="hljs-selector-class">.InputCategory</span>;
</code></pre>
<p>The category itself requires an id, <code>exampleBindings</code> in this case. The
display name is again a <code>Translation &lt;translation&gt;</code>{.interpreted-text
role=&quot;ref&quot;} identifier. The ordering is an array of identifieres
<code>&lt;moduleName&gt;:&lt;BindingId&gt;</code> and determines the order of the bindings in
the setting screen.</p>
<p>::: {.note}
::: {.title}
Note
:::</p>
<p>All bindings should be in a package with an input category.
:::</p>
<p>::: {.note}
::: {.title}
Note
:::</p>
<p>Binding description and the display name of the input category should be
translation identifiers instead of plain strings.
:::</p>
<h2><a class="anchor" aria-hidden="true" id="handling-input-events"></a><a href="#handling-input-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handling Input Events</h2>
<p>Input is handled by the
<code>Event System &lt;eventsSystems_processingEvents&gt;</code>{.interpreted-text
role=&quot;ref&quot;}. If a binding is triggered, the input system will send the
registered event to the player and the client. For the previous example,
the following system can handle the event and will greet the player on
the console when he triggers the input.</p>
<pre><code class="hljs css language-{.java}"><span class="hljs-keyword">package</span> org.terasology.examplemodule;

<span class="hljs-keyword">import</span> org.slf4j.<span class="hljs-type">Logger</span>;
<span class="hljs-keyword">import</span> org.slf4j.<span class="hljs-type">LoggerFactory</span>;
<span class="hljs-keyword">import</span> org.terasology.entitySystem.entity.<span class="hljs-type">EntityRef</span>;
<span class="hljs-keyword">import</span> org.terasology.entitySystem.event.<span class="hljs-type">ReceiveEvent</span>;
<span class="hljs-keyword">import</span> org.terasology.entitySystem.systems.<span class="hljs-type">BaseComponentSystem</span>;
<span class="hljs-keyword">import</span> org.terasology.entitySystem.systems.<span class="hljs-type">RegisterSystem</span>;
<span class="hljs-keyword">import</span> org.terasology.examplemodule.binds.<span class="hljs-type">GreeterButton</span>;

<span class="hljs-meta">@RegisterSystem</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GreeterSystem</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseComponentSystem</span> </span>{

    <span class="hljs-keyword">private</span> static <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> logger = <span class="hljs-type">LoggerFactory</span>.getLogger(<span class="hljs-type">GreeterSystem</span><span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;

    <span class="hljs-meta">@ReceiveEvent</span>
    public void onGreet(<span class="hljs-type">GreeterButton</span> greetButton, <span class="hljs-type">EntityRef</span> entity) {
        logger.info(<span class="hljs-string">"Greeting {}"</span>, entity);
    }
}
</code></pre>
<p>Example output:</p>
<pre><code class="hljs css language-{.none}">[main] INFO  o<span class="hljs-selector-class">.t</span><span class="hljs-selector-class">.examplemodule</span><span class="hljs-selector-class">.GreeterSystem</span> - Greeting EntityRef{id = <span class="hljs-number">47</span>, netId = <span class="hljs-number">0</span>, prefab = <span class="hljs-string">'engine:client'</span>}
[main] INFO  o<span class="hljs-selector-class">.t</span><span class="hljs-selector-class">.examplemodule</span><span class="hljs-selector-class">.GreeterSystem</span> - Greeting EntityRef{id = <span class="hljs-number">55</span>, netId = <span class="hljs-number">0</span>, prefab = <span class="hljs-string">'engine:player'</span>}
</code></pre>
<p>::: {.note}
::: {.title}
Note
:::</p>
<p>If the event is consumed for the client entity, it will not be sent
again to the player entity.
:::</p>
<p>::: {.todo}
client-player difference
:::</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#define-bindings">Define Bindings</a></li><li><a href="#input-categories">Input Categories</a></li><li><a href="#handling-input-events">Handling Input Events</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/TerasologyDocs/" class="nav-home"><img src="/TerasologyDocs/img/favicon.ico" alt="TerasologyDocs" width="66" height="58"/></a><div><h5>Docs</h5><a href="/TerasologyDocs/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/TerasologyDocs/docs/en/doc2.html">Guides (or other categories)</a><a href="/TerasologyDocs/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/TerasologyDocs/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/TerasologyDocs/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/TerasologyDocs/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Licensed under Apache 2.0</section></footer></div></body></html>